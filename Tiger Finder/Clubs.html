<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="Main.css" />
    <link rel="stylesheet" type="text/css" href="club.css" />
    <script src="Clubs.js"></script>
    <script src="Main.js"></script>
    <title>Clubs</title>
</head>

<body>
    
    <div class="topBar">
        <!--Drop Down Menu-->
        <button onclick="dropDown()" id="dropDownButton">
            <img src="dropdownMain.png" id="dropDownButton" width="50" height="50">
        </button>
        <nav>
            <ul class="level1">
                <li><a href="Index.html">Home</a></li>
                <li><a href="ClubSurvey.html">Club Survey</a></li>
                <li class="sub"><a href="Clubs.html">Clubs</a>
                    <ul class="level2">
                        <li><a href="Clubs.html">Club List</a></li>
                        <li><a href="Favorites.html">My Favorites</a></li>
                    </ul>
                </li>
                <li class="sub"><a href="">Account</a>
                    <ul class="level2">
                        <li><a href="Account.html">My Account</a></li>
                        <li><a href="">Log Out</a></li>
                    </ul>
                </li>
            </ul>
        </nav>


        <!--Search Bar-->
        <input class="searchBar" type="text" placeholder="Search for clubs">

        <!--Filter Icon-->
        <img src="filter-icon.webp" id="filterIcon" onclick="filterOverlay()" alt="Filter Icon">
        <!--Filter Overlay-->
        <div id="filterOverlay">
            <h2>Filter Clubs</h2>
            <div class="filter-grid">
                <div class="filter-catagory">
                    <h3>Club Type</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxAcademic"
                            onclick="saveCheckboxStates()">Academic</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxService"
                            onclick="saveCheckboxStates()">Service</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxSports"
                            onclick="saveCheckboxStates()">Sports</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxArt"
                            onclick="saveCheckboxStates()">Art</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxGames"
                            onclick="saveCheckboxStates()">Games</label>
                </div>
                <div class="filter-catagory">
                    <h3>Meeting Time</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxBefore"
                            onclick="saveCheckboxStates()">Before School</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxAfter"
                            onclick="saveCheckboxStates()">After School</label>
                </div>
                <!--
                <div class="filter-catagory">
                    <h3>Meeting Frequency</h3>
                    <label><input type="checkbox" class="filterBox">Monthy</label>
                    <label><input type="checkbox" class="filterBox">Biweekly</label>
                    <label><input type="checkbox" class="filterBox">Weekly</label>
                    <label><input type="checkbox" class="filterBox">Varied</label>
                </div>
                -->
                <div class="filter-catagory">
                    <h3>Meeting Days</h3>
                    <label><input type="checkbox" class="filterBox" id="checkboxMonday" onclick = "saveCheckboxStates()"> Monday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxTuesday" onclick = "saveCheckboxStates()"> Tuesday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxWednesday" onclick = "saveCheckboxStates()"> Wednesday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxThursday" onclick = "saveCheckboxStates()"> Thursday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxFriday" onclick = "saveCheckboxStates()"> Friday</label>
                    <label><input type="checkbox" class="filterBox" id="checkboxWeekend" onclick = "saveCheckboxStates()"> Weekend</label>
                </div>
            </div>
        </div>
    </div>
        <br>
            
        <div class="blur">
            <h1 id="clubTitle">Clubs</h1>
            
                <a href="https://docs.google.com/forms/d/1hOObxXLJGflC10so4TUrSxYnWWgg1IlV28uNZAJoV3E/edit" class="btn"> 
                    <button id="btn">If your club is not present or does not have details fill out this form</button>
                </a>
            
            <br>
            <ul id="clubList" class="container"></ul>
            <script>
                createClubs();
            </script>
            <!--Search Bar Functionality -->
            <script>
                window.addEventListener("DOMContentLoaded", () => {
                    const searchBar = document.getElementById("searchBar");
                    const clubList = document.getElementById("clubList");

                    function filterClubs(term) {
                        const searchTerm = term.toLowerCase();
                        const clubItems = clubList.querySelectorAll("li");

                        clubItems.forEach(item => {
                            const clubName = item.querySelector("h3")?.textContent.toLowerCase() || "";
                            const staffName = item.querySelector("p")?.textContent.toLowerCase() || "";

                            if (clubName.includes(searchTerm) || staffName.includes(searchTerm)) {
                                item.style.display = "flex";
                            } else {
                                item.style.display = "none";
                            }
                        });
                    }

                    // Load saved search term and immediately filter
                    const savedSearch = localStorage.getItem("searchTerm") || "";
                    searchBar.value = savedSearch;
                    filterClubs(savedSearch);

                    // Save and re-filter when typing
                    searchBar.addEventListener("input", (e) => {
                        const term = e.target.value;
                        localStorage.setItem("searchTerm", term);
                        filterClubs(term);
                    });
                });
            </script>
        </div>
        <!-- Overlay for club description -->
<div id="descriptionOverlay" class="overlay hidden">
  <div class="overlay-content">
    <span id="closeOverlay" class="close-btn">&times;</span>
    <h2 id="overlayTitle"></h2>
    <p id="overlayStaff"></p>
    <p id="overlayEmail"></p>
    <div id="overlayDescription"></div>
  </div>
</div>
</body>